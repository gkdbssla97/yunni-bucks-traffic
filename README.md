# ☕️ YUNNI-BUCKS-TRAFFIC
#### [YUNNI-BUCKS 프로젝트 세부 사항](https://github.com/gkdbssla97/yunni-bucks)

1. 개발 기간 : 2023-07 ~ 2022-09 *(MVP기능 구현 완료)* </br>
2. 개발 기간 : 2022-10 ~ *(트래픽 상황 대처 프로젝트 고도화)*
--- 

### Traffic 환경 동시성 처리
  * 멀티 쓰레드 동작 중 발생 가능 문제점 해결 방안
      * 낙관 락(Optimistic Lock)
      * 비관 락(Pessimistic Lock)
      * 분산 락(Redisson)
--- 

### 기능 별 데이터 정합성 관리
- 메뉴 주문
- 쿠폰 관리
- 
---

### 메뉴 주문
- 한 사용자가 여러 개의 주문을 동시에 요청
    - Optimistic Lock 활용
- 여러 사용자가 음료 A를 주문을 동시에 요청
    - Pessimistic Lock 활용
      
#### 구현 이유
* Optimistic Locking 선택한 이유 
  * 대부분의 상황에서 실제로 동일한 리소스에 대한 동시 요청이 드물게 발생하고, 이런 상황에서는 Optimistic Locking이 더 효율적
  * 낮은 비용으로 높은 동시성을 제공하며, 충돌 발생 시 재시도 로직을 통해 처리
* Pessimistic Lock 사용하지 않은 이유
    * 다중 사용자가 아닌 한 명의 사용자 이므로 충돌이 자주 발생하거나, 데이터 일관성을 보장이 중요한 작업이라 판단하지 않았음
---

### 쿠폰 관리
- 신규 회원 가입 시 제공되는 선착순 쿠폰 100장 이벤트를 진행
    - Pessimistic Lock 활용
### 구현 이유

[//]: # (* PessimisicLock을 통한 비관적 lock 진행)

[//]: # (    * Redis를 사용하지 않은 이유)

[//]: # (        * 한 사람의 포인트에 관한 내용이기 때문에 대량의 트래픽이 걸리거나 많은 충돌이 발생하지 않을 것이라 판단하였기 때문이다.)

[//]: # (        * 한번에 한사람이 자신의 포인트 충전을 하는 것이기 때문.)

[//]: # (    * OptimisticLock을 사용하지 않은 이유)

[//]: # (        * Pessimistic Lock은 작업 도중에 Lock을 걸어 다른 쓰레드의 접근 자체를 차단하기 때문에 versioning을 통해 정합성을 맞추는 Optimistic Lock에 비해 데이터 정합성을 더 잘 보장할 수 있다고 생각했기 때문이다.)

[//]: # (            * 포인트의 경우는 실제 돈과 연결되기 때문에 정합성이 중요하다 판단하였다.)